(function(){function r(r,n){var a={}.hasOwnProperty;for(var t in n)a.call(n,t)&&(r[t]=n[t]);return r}var n,a,t,l,u,e,b,h,i,o,g,s;n="\\s*([+-]?\\d+|nan|NaN)\\s*",a="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?|nan|NaN)\\s*",t="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",l={hex3:/^#([0-9a-fA-F]{3})$/,hex6:/^#([0-9a-fA-F]{6})$/,rgbint:new RegExp("^rgb\\("+[n,n,n]+"\\)$"),rgbp:new RegExp("^rgb\\("+[t,t,t]+"\\)$"),rgbaint:new RegExp("^rgba\\("+[n,n,n,a]+"\\)$"),rgbap:new RegExp("^rgba\\("+[t,t,t,a]+"\\)$"),hslp:new RegExp("^hsl\\("+[a,t,t]+"\\)$"),hslap:new RegExp("^hsla\\("+[a,t,t,a]+"\\)$")},u={hex3:function(r){return r=parseInt(r[1],16),{r:17*(r>>8),g:17*(240&r)>>4,b:17*(15&r),a:1}},hex6:function(r){return r=parseInt(r[1],16),{r:r>>16,g:r>>8&255,b:255&r,a:1}},rgbint:function(r){return{r:+r[1],g:+r[2],b:+r[3],a:1}},rgbp:function(r){return{r:255*r[1]/100,g:255*+r[2]/100,b:255*+r[3]/100,a:1}},rgbaint:function(r){return{r:+r[1],g:+r[2],b:+r[3],a:+r[4]}},rgbap:function(r){return{r:255*r[1]/100,g:255*+r[2]/100,b:255*r[3]/100,a:+r[4]}},hslap:function(r){return{h:+r[1],s:r[2]/100,l:r[3]/100,a:+r[4]}},hslp:function(r){return{h:+r[1],s:r[2]/100,l:r[3]/100,a:1}},all:function(r){var n,a,t,e;if("object"==typeof r)return null==r.a&&(r.a=1),r["@a"]?r=o.lab2rgb(r):r.c?r=o.hcl2rgb(r):r.hex?(n=l.hex3.exec(r.hex))?(a=u.hex3(n)||{},a.a=r.a,a):(n=l.hex6.exec(r.hex))?(a=u.hex6(n),a.a=r.a,a):r:r.value?u.all(r.value):r;if("number"==typeof r)return o.num2rgb(r);r=(r+"").trim().toLowerCase();for(t in a=l)if(e=a[t],n=e.exec(r))return u[t](n);return"undefined"!=typeof named&&null!==named&&named[r]?o.num2rgb(named[r]):"transparent"===r?{r:NaN,g:NaN,b:NaN,a:0}:{r:NaN,g:NaN,b:NaN,a:NaN}}},h=3*(b=6/29)*b,i=b*b*b,o={num2rgb:function(r){return{r:r>>16,g:r>>8&255,b:255&r,a:1}},_hsl2rgb:function(r,n,a){return 255*(r<60?n+(a-n)*r/60:r<180?a:r<240?n+(a-n)*(240-r)/60:n)},hsl2rgb:function(r){var n,a,t,l,u,e,b;return n=r.h,a=r.s,t=r.l,l=r.a,n=n%360+360*(n<0),a=isNaN(n)||isNaN(a)?0:a,u=t+(t<.5?t:1-t)*a,e=2*t-u,{r:(b=this._hsl2rgb(n>=240?n-240:n+120,e,u))>0?b:0,g:(b=this._hsl2rgb(n,e,u))>0?b:0,b:(b=this._hsl2rgb(n<120?n+240:n-120,e,u))>0?b:0,a:l}},rgb2hsl:function(r){var n,a,t,l,u,e,b,h,i,o,g;return n=r.r,a=r.g,t=r.b,l=r.a,u=[n/255,a/255,t/255],n=u[0],a=u[1],t=u[2],e=Math.max(n,a,t),b=Math.min(n,a,t),h=e-b,i=(e+b)/2,0===h?(o=(u=[0,0])[0],g=u[1]):(o=function(){switch(!1){case e!==n:return(a-t)/h%6*60;case e!==a:return 60*((t-n)/h+2);case e!==t:return 60*((n-a)/h+4)}}(),g=h/(1-Math.abs(2*i-1))),o=(o+360)%360,{h:o,s:g,l:i,a:l}},_rgb2lrgb:function(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)},_xyz2lab:function(r){return r>i?Math.pow(r,1/3):r/h+4/29},_lab2xyz:function(r){return r>b?r*r*r:h*(r-4/29)},_lrgb2rgb:function(r){var n,a;return(n=(a=255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055))<255?a:255)>0?n:0},lab2rgb:function(r){var n,a,t,l,u,e,b,h;return n=[r["@l"],r["@a"],r["@b"],null!=r.a?r.a:1],a=n[0],t=n[1],l=n[2],u=n[3],e=(a+16)/116,b=isNaN(t)?e:e+t/500,h=isNaN(l)?e:e-l/200,b=.96422*o._lab2xyz(b),e=1*o._lab2xyz(e),h=.82521*o._lab2xyz(h),{r:o._lrgb2rgb(3.1338561*b-1.6168667*e-.4906146*h),g:o._lrgb2rgb(-.9787684*b+1.9161415*e+.033454*h),b:o._lrgb2rgb(.0719453*b-.2289914*e+1.4052427*h),a:u}},lab2hcl:function(r){var n,a,t,l,u,e;return n=[r["@l"],r["@a"],r["@b"],null!=r.a?r.a:1],a=n[0],t=n[1],l=n[2],u=n[3],0===t&&0===l?{h:NaN,c:0,l:a,a:u}:(e=180*Math.atan2(l,t)/Math.PI,{h:isNaN(e)?e:e<0?e+360:e>0?e:0,c:Math.sqrt(t*t+l*l),l:isNaN(a)?a:a>0?a:0,a:u})},hcl2lab:function(r){var n;return r.a=null!=r.a?r.a:1,isNaN(r.h)?{"@l":r.l,"@a":0,"@b":0,a:r.a}:(n=r.h*Math.PI/180,{"@l":r.l,"@a":Math.cos(n)*r.c,"@b":Math.sin(n)*r.c,a:r.a})},hcl2rgb:function(r){return this.lab2rgb(this.hcl2lab(r))}},r(e=function(n){return r(this,u.all(n))},g={same:function(r,n){var a;return null==n&&(n=this),a=[this.rgb(r),this.rgb(n)],r=a[0],n=a[1],r.r===n.r&&r.g===n.g&&r.b===n.b&&r.a===n.a},rgb:function(r){var n;return null==r&&(r=this),null!=(n=u.all(r)).c?o.lab2rgb(o.hcl2lab(n)):null!=n.h?o.hsl2rgb(n):n},rgbfv:function(r){var n;return null==r&&(r=this),n=this.rgb(r),[n.r/255,n.g/255,n.b/255]},web:function(r,n){var a;return null==r&&(r=this),null==n&&(n=!1),null!=(a=g.rgb(r)).a&&(isNaN(a.a)||!a.a&&["r","g","b"].filter(function(r){return null!=a[r]&&isNaN(a[r])}))?"transparent":a.a<1?this.rgbaStr(a):this.hex(a,n)},rgbaStr:function(r){var n;return null==r&&(r=this),n=g.rgb(r),"rgba("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+", "+n.a+")"},hsl:function(r){var n;return null==r&&(r=this),null!=(n=u.all(r)).r?o.rgb2hsl(n):n},hex:function(r,n){var a,t;return null==r&&(r=this),null==n&&(n=!1),null!=r&&"boolean"==typeof r&&(r=(a=[this,r])[0],n=a[1]),t=g.rgb(r),t=["r","g","b"].map(function(r){var n,a;return n=((a=Math.round(t[r]))<255?a:255).toString(16)+"",n=function(r,n){for(var a="";n>0;(n>>=1)&&(r+=r))1&n&&(a+=r);return a}("0",2-n.length)+n}).join(""),n&&t[0]===t[1]&&t[2]===t[3]&&t[4]===t[5]&&(t=t[0]+t[2]+t[4]),"#"+t},lab:function(r){var n,a,t,l,u,e,b,h;return null==r&&(r=this),r.c?o.hcl2lab(r):(n=g.rgb(r),a=n.r,t=n.g,l=n.b,u=n.a,a=o._rgb2lrgb(a),t=o._rgb2lrgb(t),l=o._rgb2lrgb(l),e=o._xyz2lab((.2225045*a+.7168786*t+.0606169*l)/1),a===t&&t===l?b=h=e:(b=o._xyz2lab((.4360747*a+.3850649*t+.1430804*l)/.96422),h=o._xyz2lab((.0139322*a+.0971045*t+.7141733*l)/.82521)),{"@l":116*e-16,"@a":500*(b-e),"@b":200*(e-h),a:u})},hcl:function(r){return null==r&&(r=this),o.lab2hcl(g.lab(r))},int:function(r){return null==r&&(r=this),r=g.rgb(r),(Math.round(r.r)<<16)+(Math.round(r.g)<<8)+Math.round(r.b)},rand:function(){return{h:360*Math.random(),s:Math.random(),l:Math.random(),a:1}},complement:function(r){var n;return n=g.rgb(r),g.hsl({r:255-n.r,g:255-n.g,b:255-n.b})},lighter:function(r,n){var a;return null==r&&(r=this),null==n&&(n=1),a=g.hsl(r),a.l*=Math.pow(1/.7,n),a},darker:function(r,n){var a;return null==r&&(r=this),null==n&&(n=1),a=g.hsl(r),a.l*=Math.pow(.7,n),a}}),e.prototype=r(Object.create(Object.prototype),g);for(s in g)!function(r,n){e.prototype[r]=function(){return n(this)}}(s,g[s]);"undefined"!=typeof module&&null!==module?module.exports=e:window.ldColor=window.ldcolor=e}).call(this);
