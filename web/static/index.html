<!DOCTYPE html><html><head><link href="https://fonts.googleapis.com/css?family=Lobster" rel="stylesheet"><link rel="stylesheet" type="text/css" href="assets/lib/bootstrap/main/css/bootstrap.min.css"><link rel="stylesheet" type="text/css" href="assets/lib/@loadingio/bootstrap.ext/main/index.min.css"><link rel="stylesheet" type="text/css" href="assets/lib/ldiconfont/main/ldif.min.css"><link rel="stylesheet" type="text/css" href="assets/lib/ldgradienteditor/dev/index.min.css"><link rel="stylesheet" type="text/css" href="css/index.css"><style type="text/css">@font-face {
  font-family: 'ldi';
  font-weight: normal;
  font-style: normal;
  src: url("assets/lib/ldiconfont/main/ldif.ttf") format('truetype');
}
</style></head><body><svg style="position:absolute;z-index:-1;opacity:0"><defs><path id="ldg-knob-light" fill="none" stroke="#fff" stroke-opacity="0.7" stroke-width="1.5" d="M53.422,10.156C73.91,11.893,90,29.062,90,50c0,22.091-17.909,40-40,40S10,72.091,10,50c0-20.938,16.09-38.107,36.578-39.844 M50,7.5v4"></path><path id="ldg-knob-dark" fill="none" stroke="#000" stroke-opacity="0.3" stroke-width="1.5" d="M53.422,10.156C73.91,11.893,90,29.062,90,50c0,22.091-17.909,40-40,40S10,72.091,10,50c0-20.938,16.09-38.107,36.578-39.844 M50,7.5v4"></path><path id="ldg-copy" fill="none" stroke="#444" d="M11,12H3 c-0.552,0-1-0.448-1-1V3c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1v8C12,11.552,11.552,12,11,12z M4,14h9c0.552,0,1-0.448,1-1V4"></path></defs></svg><br><br><div class="title"><img src="assets/img/logo.svg" alt="Gradient.js"><p>minimalist linear gradient editor </p></div><br><div class="menu" id="menu"><i class="i-bars"></i><i class="i-clone"></i><i class="i-save"></i><i class="i-close"></i></div><div class="sorts"><div class="sort h" data-action="sort.h"></div><div class="sort c" data-action="sort.c"></div><div class="sort l" data-action="sort.l"></div></div><div id="container"><div id="add" style="width:118px;height:118px;border-radius:50%;border:1px dashed #ddd;display:inline-block;margin:15px;vertical-align:top;background:#fff;"></div></div><script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script><script type="text/javascript" src="assets/lib/@loadingio/ldquery/main/ldq.min.js"></script><script type="text/javascript" src="assets/lib/ldcolor/main/ldcolor.min.js"></script><script type="text/javascript" src="assets/lib/ldgradienteditor/dev/index.min.js"></script><script>var makeOne, local;
makeOne = function(it, append){
  var node, ret;
  append == null && (append = true);
  node = document.createElement("div");
  if (append) {
    container.appendChild(node);
  } else {
    container.insertBefore(node, container.childNodes[1]);
  }
  ret = new GradientEditor({
    root: node,
    colors: it.colors,
    dir: it.dir,
    w: it.w,
    id: it.id
  });
  ret.root.ldge = ret;
  ret.root.addEventListener('mouseover', function(){
    var mbox, box, x, y, ref$;
    mbox = menu.getBoundingClientRect();
    box = ret.root.getBoundingClientRect();
    x = box.x + box.width / 2 - mbox.width / 2;
    y = box.y - mbox.height + 5 + document.scrollingElement.scrollTop;
    ref$ = menu.style;
    ref$.left = x + "px";
    ref$.top = y + "px";
    return menu.active = ret;
  });
  return ret;
};
local = {};
ld$.fetch('assets/data/orders.json', {}, {
  type: 'json'
}).then(function(orders){
  local.orders = orders;
  return ld$.fetch('assets/data/gradients.json', {}, {
    type: 'json'
  });
}).then(function(colors){
  var res$, k, v, ldges;
  if (Array.isArray(colors)) {
    colors.map(function(d, i){
      return d.id = i + 1;
    });
  } else {
    res$ = [];
    for (k in colors) {
      v = colors[k];
      res$.push((v.id = k, v));
    }
    colors = res$;
  }
  colors = colors.filter(function(it){
    return it.colors.length;
  });
  colors = colors.map(function(it){
    var w;
    w = it.colors.map(function(it){
      return 100 - ldcolor.hcl(it).h;
    }).reduce(function(a, b){
      return a + b;
    }, 0) / it.colors.length;
    return it.w = isNaN(w) ? 0 : w, it;
  });
  colors.sort(function(a, b){
    return local.orders.indexOf(a.id + "") - local.orders.indexOf(b.id + "");
  });
  menu.addEventListener('mousedown', function(e){
    var dragger;
    if (e.target.classList.contains('i-bars')) {
      menu.drag = menu.active;
      dragger = function(e){};
      document.addEventListener('mousemove', dragger);
      return document.addEventListener('mouseup', function(){
        var up;
        return up = function(e){
          var p, orders;
          document.removeEventListener('mousemove', dragger);
          document.removeEventListener('mouse', up);
          p = ld$.parent(e.target, '.ldgradient');
          if (!p || p === menu.drag.root) {
            return;
          }
          menu.drag.root.parentNode.removeChild(menu.drag.root);
          p.parentNode.insertBefore(menu.drag.root, p);
          orders = Array.from(container.childNodes).filter(function(it){
            return it.ldge;
          }).map(function(d, i){
            return d.ldge.id;
          });
          ld$.fetch("gradient/order?data=" + encodeURIComponent(orders.join(',')), {}, {});
          return menu.drag = null;
        };
      }());
    }
  });
  menu.addEventListener('click', function(e){
    var d;
    if (e.target.classList.contains('i-save')) {
      d = encodeURIComponent(JSON.stringify(menu.active.getJson()));
      return ld$.fetch("/gradient?data=" + d, {
        method: 'GET'
      });
    } else if (e.target.classList.contains('i-close')) {
      d = encodeURIComponent(JSON.stringify(menu.active.getJson()));
      ld$.fetch("/gradient?data=" + d, {
        method: 'DELETE'
      });
      return menu.active.root.parentNode.removeChild(menu.active.root);
    }
  });
  return ldges = colors.map(makeOne);
});
add.addEventListener('click', function(){
  return makeOne({
    colors: ['#f0f', '#0ff'],
    dir: 0,
    id: Math.random().toString(36).substring(2)
  }, false);
});</script></body></html>